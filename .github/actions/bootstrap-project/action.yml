name: Bootstrap Project
description: Pulls needed dependencies and bootstraps project
inputs:
  example-constants:
    description: 'Content of example project constants file'
    type: string
    required: false
runs:
  using: "composite"
  steps:
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: '3.1.2'
        bundler-cache: true
    - name: Install Mint
      run: brew update && brew install mint
      shell: bash
    - name: Cache Mint Packages
      uses: actions/cache@v3
      with:
        path: ~/.mint/packages
        key: ${{ runner.os }}-mint-${{ hashFiles('**/Mintfile') }}
        restore-keys: |
          ${{ runner.os }}-mint-
    - name: Bootstrap Project
      run: ./Scripts/BootstrapProject.sh --skip-bundle-instal
      shell: bash
    - name: Bootstrap Example Project
      if: ${{ inputs.example-constants != '' }}
      run: |
        cd Example
        echo "${{ inputs.example-constants }}" > Example/Resources/Constants.yml
        source Scripts/BootstrapProject.sh --skip-mint-bootstrap
      shell: bash
